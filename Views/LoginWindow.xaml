<Window x:Class="ERP.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:ERP.ViewModels"
        xmlns:local="clr-namespace:ERP.Helpers"
        Title="登录" Height="360" Width="420"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        Background="Transparent">
    <Window.DataContext>
        <vm:LoginViewModel />
    </Window.DataContext>

    <Grid>
        <!-- 圆角卡片：使用资源中的渐变作为背景并添加投影 -->
        <Border CornerRadius="12"
                Padding="20"
                Background="{StaticResource AppBackgroundGradient}"
                Width="360"
                Height="280"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
            <Border.Effect>
                <DropShadowEffect Color="#000000" BlurRadius="20" ShadowDepth="4" Opacity="0.45"/>
            </Border.Effect>

            <StackPanel>
                <TextBlock Text="Login" Foreground="#FFF" FontSize="20" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                <TextBlock Text="Name" Foreground="#DDD" Margin="0,4,0,2"/>
                <Border
                        CornerRadius="6"
                        BorderBrush="#3A3A40"
                        BorderThickness="1"
                        Height="30" Background="#FF414156">
                    <TextBox Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                             Background="Transparent"
                             BorderThickness="0"
                             Foreground="White"
                             VerticalContentAlignment="Center"
                             Padding="6,0"/>
                </Border>

                <TextBlock Text="Password" Foreground="#DDD" Margin="0,8,0,2"/>
                <Border Background="#FF414156"
                        CornerRadius="6"
                        BorderBrush="#3A3A40"
                        BorderThickness="1"
                        Height="30">
                    <PasswordBox x:Name="PwdBox"
                                Background="Transparent"
                                 BorderThickness="0"
                                 Foreground="White"
                                 VerticalContentAlignment="Center"
                                 Padding="6,0"
                                     local:PasswordBoxAssistant.BindPassword="True"
local:PasswordBoxAssistant.BoundPassword="{Binding Password, Mode=TwoWay}"
  
                                 />
                </Border>

                <TextBlock Text="{Binding ErrorMessage}" Foreground="#FF6B6B" Margin="0,8,0,0" Height="24"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
                    <Button Content="取消" Width="80" Margin="0,0,8,0" Style="{StaticResource ModernButton}"  Command="{Binding CancelCommand}" />
                    <Button Content="登录" Width="100" Style="{StaticResource ModernButton}"
                            Command="{Binding LoginCommand}"
                            />
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</Window>